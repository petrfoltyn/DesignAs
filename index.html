<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N√°vrh pod√©ln√© v√Ωztu≈æe ≈æelezobetonov√©ho pr≈Ø≈ôezu</title>

    <!-- CSS Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è N√°vrh pod√©ln√© v√Ωztu≈æe ≈æelezobetonov√©ho pr≈Ø≈ôezu</h1>
            <p>V√Ωpoƒçet podle Eurok√≥du EC2/EC3 - Parabolicko-obd√©ln√≠kov√Ω diagram</p>
        </div>

        <form id="designForm">
            <!-- Hlavn√≠ taby -->
            <div class="main-tabs">
                <button type="button" class="main-tab-button active" data-main-tab="zadani">üìã Zad√°n√≠</button>
                <button type="button" class="main-tab-button" data-main-tab="analyza">üìä Anal√Ωza p≈ôetvo≈ôen√≠ a napƒõt√≠ pr≈Ø≈ôezu</button>
                <button type="button" class="main-tab-button" data-main-tab="navrh">üîß N√°vrh v√Ωztu≈æe</button>
                <button type="button" class="main-tab-button" data-main-tab="interakcni">üìà Interakƒçn√≠ diagram</button>
            </div>

            <!-- TAB 1: Zad√°n√≠ -->
            <div id="zadani" class="main-tab-content active">
            <div class="content">
                <!-- Lev√Ω panel - formul√°≈ô s taby -->
                <div class="left-panel">
                    <!-- Tab navigace -->
                    <div class="tabs">
                        <button type="button" class="tab-button active" data-tab="geometry">üìê Geometrie</button>
                        <button type="button" class="tab-button" data-tab="concrete">üß± Beton</button>
                        <button type="button" class="tab-button" data-tab="steel">üî© V√Ωztu≈æ</button>
                        <button type="button" class="tab-button" data-tab="layers">üìç Vrstvy</button>
                    </div>

                    <!-- Tab obsah -->
                    <div id="geometry" class="tab-content active">
                        <div class="section">
                            <h2>üìê Geometrie pr≈Ø≈ôezu</h2>

                            <div class="info-box">
                                ‚ÑπÔ∏è Zadejte z√°kladn√≠ rozmƒõry obd√©ln√≠kov√©ho pr≈Ø≈ôezu
                            </div>

                            <div class="form-group">
                                <label>
                                    ≈†√≠≈ôka pr≈Ø≈ôezu <span class="label-description">(b)</span>
                                </label>
                                <input type="number" id="b" step="0.001" min="0.1" max="5" value="0.3" required>
                                <span class="unit">Jednotka: m (metry)</span>
                            </div>

                            <div class="form-group">
                                <label>
                                    V√Ω≈°ka pr≈Ø≈ôezu <span class="label-description">(h)</span>
                                </label>
                                <input type="number" id="h" step="0.001" min="0.1" max="5" value="0.5" required>
                                <span class="unit">Jednotka: m (metry)</span>
                            </div>
                        </div>
                    </div>

                    <div id="concrete" class="tab-content">
                        <div class="section">
                            <h2>üß± Vlastnosti betonu</h2>

                            <div class="info-box">
                                ‚ÑπÔ∏è Materi√°lov√© charakteristiky betonu podle EC2
                            </div>

                            <div class="form-group">
                                <label>
                                    N√°vrhov√° pevnost v tlaku <span class="label-description">(f<sub>cd</sub>)</span>
                                </label>
                                <input type="number" id="fcd" step="1000" min="-50000000" max="-1000000" value="-20000000" required>
                                <span class="unit">Jednotka: Pa (Pascaly, z√°porn√© pro tlak) | P≈ô√≠klad: -20 MPa = -20000000 Pa</span>
                            </div>

                            <div class="form-group">
                                <label>
                                    P≈ôetvo≈ôen√≠ na konci 2. vƒõtve <span class="label-description">(Œµ<sub>c2</sub>)</span>
                                </label>
                                <input type="number" id="epsC2" step="0.0001" min="-0.01" max="0" value="-0.002" required>
                                <span class="unit">Jednotka: - (bezrozmƒõrn√©) | Typicky -0.002 (-2‚Ä∞)</span>
                            </div>

                            <div class="form-group">
                                <label>
                                    Mezn√≠ tlakov√© p≈ôetvo≈ôen√≠ <span class="label-description">(Œµ<sub>cu</sub>)</span>
                                </label>
                                <input type="number" id="epsCu" step="0.0001" min="-0.01" max="0" value="-0.0035" required>
                                <span class="unit">Jednotka: - (bezrozmƒõrn√©) | Typicky -0.0035 (-3.5‚Ä∞)</span>
                            </div>
                        </div>
                    </div>

                    <div id="steel" class="tab-content">
                        <div class="section">
                            <h2>üî© Vlastnosti v√Ωztu≈æe</h2>

                            <div class="info-box">
                                ‚ÑπÔ∏è Materi√°lov√© charakteristiky beton√°≈ôsk√© v√Ωztu≈æe
                            </div>

                            <div class="form-group">
                                <label>
                                    N√°vrhov√° mez kluzu <span class="label-description">(f<sub>yd</sub>)</span>
                                </label>
                                <input type="number" id="fyd" step="1000000" min="100000000" max="1000000000" value="435000000" required>
                                <span class="unit">Jednotka: Pa (Pascaly) | P≈ô√≠klad: 435 MPa = 435000000 Pa</span>
                            </div>

                            <div class="form-group">
                                <label>
                                    Maxim√°ln√≠ napƒõt√≠ na ≈°ikm√© vƒõtvi <span class="label-description">(k¬∑f<sub>yd</sub>)</span>
                                </label>
                                <input type="number" id="k_fyd" step="1000000" min="100000000" max="1500000000" value="500000000" required>
                                <span class="unit">Jednotka: Pa (Pascaly) | Typicky 1.05-1.15 √ó f<sub>yd</sub></span>
                            </div>

                            <div class="form-group">
                                <label>
                                    Modul pru≈ænosti <span class="label-description">(E<sub>s</sub>)</span>
                                </label>
                                <input type="number" id="Es" step="1000000000" min="100000000000" max="300000000000" value="200000000000" required>
                                <span class="unit">Jednotka: Pa (Pascaly) | Typicky 200 GPa = 200000000000 Pa</span>
                            </div>

                            <div class="form-group">
                                <label>
                                    Mezn√≠ p≈ôetvo≈ôen√≠ v√Ωztu≈æe <span class="label-description">(Œµ<sub>ud</sub>)</span>
                                </label>
                                <input type="number" id="epsUd" step="0.001" min="0" max="0.1" value="0.01" required>
                                <span class="unit">Jednotka: - (bezrozmƒõrn√©) | Typicky 0.01 (10‚Ä∞)</span>
                            </div>
                        </div>
                    </div>

                    <div id="layers" class="tab-content">
                        <div class="section">
                            <h2>üìç Poloha vrstev v√Ωztu≈æe</h2>

                            <div class="info-box">
                                ‚ÑπÔ∏è Sou≈ôadnice vrstev v glob√°ln√≠m sou≈ôadn√©m syst√©mu modelu
                            </div>

                            <div class="layer-inputs">
                                <h3>Vrstva 1 - Horn√≠ v√Ωztu≈æ</h3>

                                <div class="form-group">
                                    <label>
                                        Vzd√°lenost od horn√≠ hrany <span class="label-description">(kryt√≠ + d<sub>s</sub>/2)</span>
                                    </label>
                                    <input type="number" id="layer1_yPos" step="0.001" value="0.05" required>
                                    <span class="unit">Jednotka: m | V√Ωchoz√≠: 50 mm od horn√≠ho okraje</span>
                                </div>
                            </div>

                            <div class="layer-inputs">
                                <h3>Vrstva 2 - Doln√≠ v√Ωztu≈æ</h3>

                                <div class="form-group">
                                    <label>
                                        Vertik√°ln√≠ sou≈ôadnice <span class="label-description">(y<sub>pos</sub>)</span>
                                    </label>
                                    <input type="number" id="layer2_yPos" step="0.001" value="0.05" required>
                                    <span class="unit">Jednotka: m | V√Ωchoz√≠: 50 mm od doln√≠ho okraje (pro h=0.5m ‚Üí ypos=0.05m)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tlaƒç√≠tka -->
                    <div class="button-group">
                        <button type="button" class="btn-calculate" onclick="calculateZadani()">üßÆ Vypoƒç√≠tat</button>
                        <button type="reset" class="btn-reset">üîÑ Reset</button>
                    </div>

                    <!-- V√Ωsledky -->
                    <div id="results" class="results">
                        <h2>üìä V√Ωsledky zad√°n√≠</h2>
                        <div id="resultsContent"></div>
                    </div>
                </div>

                <!-- Prav√Ω panel - velk√° vizualizace -->
                <div class="right-panel">
                    <div class="visualization">
                        <h2>üìà Vizualizace pr≈Ø≈ôezu</h2>
                        <div class="canvas-container">
                            <canvas id="sectionCanvas"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <!-- TAB 2: Anal√Ωza p≈ôetvo≈ôen√≠ a napƒõt√≠ -->
            <div id="analyza" class="main-tab-content">
            <!-- Sekce anal√Ωzy p≈ôetvo≈ôen√≠ a napƒõt√≠ -->
            <div class="strain-analysis">
                <div class="analysis-controls">
                    <div class="point-selection">
                        <!-- Lev√Ω sloupec - horn√≠ body -->
                        <div class="point-column">
                            <h4>Horn√≠ bod (vyberte 1)</h4>

                            <div class="point-group" id="point-top">
                                <label>
                                    <input type="radio" name="top-point" class="point-radio" data-point="top" value="top">
                                    üî¥ Horn√≠ okraj pr≈Ø≈ôezu
                                    <input type="number" id="strain_top" step="0.1" value="-3.5" disabled title="P≈ôetvo≈ôen√≠ Œµtop [‚Ä∞]" placeholder="Œµtop [‚Ä∞]">
                                </label>
                            </div>

                            <div class="point-group" id="point-s1">
                                <label>
                                    <input type="radio" name="top-point" class="point-radio" data-point="s1" value="s1" checked>
                                    üî¥ Horn√≠ v√Ωztu≈æ (A1)
                                    <input type="number" id="strain_s1" step="0.1" value="-2.0" title="P≈ôetvo≈ôen√≠ Œµs1 [‚Ä∞]" placeholder="Œµs1 [‚Ä∞]">
                                </label>
                            </div>
                        </div>

                        <!-- Prav√Ω sloupec - doln√≠ body -->
                        <div class="point-column">
                            <h4>Doln√≠ bod (vyberte 1)</h4>

                            <div class="point-group" id="point-s2">
                                <label>
                                    <input type="radio" name="bottom-point" class="point-radio" data-point="s2" value="s2" checked>
                                    üîµ Doln√≠ v√Ωztu≈æ (A2)
                                    <input type="number" id="strain_s2" step="0.1" value="2.0" title="P≈ôetvo≈ôen√≠ Œµs2 [‚Ä∞]" placeholder="Œµs2 [‚Ä∞]">
                                </label>
                            </div>

                            <div class="point-group" id="point-bottom">
                                <label>
                                    <input type="radio" name="bottom-point" class="point-radio" data-point="bottom" value="bottom">
                                    üîµ Doln√≠ okraj pr≈Ø≈ôezu
                                    <input type="number" id="strain_bottom" step="0.1" value="10.0" disabled title="P≈ôetvo≈ôen√≠ Œµbottom [‚Ä∞]" placeholder="Œµbottom [‚Ä∞]">
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn-calculate" onclick="calculateStrainAnalysis()">
                            üìê Vypoƒç√≠tat p≈ôetvo≈ôen√≠ a napƒõt√≠
                        </button>
                    </div>
                </div>

                <div class="analysis-canvas-container">
                    <div class="canvas-wrapper">
                        <h3>Diagram p≈ôetvo≈ôen√≠</h3>
                        <canvas id="strainCanvas" width="500" height="600"></canvas>
                    </div>

                    <div class="canvas-wrapper">
                        <h3>Diagram napƒõt√≠ (parabolicko-obd√©ln√≠kov√Ω)</h3>
                        <canvas id="stressCanvas" width="500" height="600"></canvas>
                    </div>
                </div>

                <div id="analysisResults" class="analysis-results" style="display: none;">
                    <h3>V√Ωsledky anal√Ωzy</h3>
                    <div id="analysisResultsContent"></div>
                </div>
            </div>
            </div>

            <!-- TAB 3: N√°vrh v√Ωztu≈æe -->
            <div id="navrh" class="main-tab-content">
                <div class="content">
                    <!-- Lev√Ω panel - vstupn√≠ √∫daje -->
                    <div class="left-panel">
                        <div class="section">
                            <h2>üîß N√°vrh v√Ωztu≈æe pro zadan√© zat√≠≈æen√≠</h2>

                            <div class="info-box">
                                ‚ÑπÔ∏è Zadejte vnit≈ôn√≠ s√≠ly p≈Øsob√≠c√≠ na pr≈Ø≈ôez. Aplikace navrhne pot≈ôebnou v√Ωztu≈æ.
                            </div>

                            <!-- Zat√≠≈æen√≠ -->
                            <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #e9ecef;">
                                <h3 style="color: #495057; font-size: 16px; margin-bottom: 15px;">‚ö° Zat√≠≈æen√≠ pr≈Ø≈ôezu</h3>

                                <div class="form-group">
                                    <label>Norm√°lov√° s√≠la N <span class="label-description">(kladn√° = tah, z√°porn√° = tlak)</span></label>
                                    <input type="number" id="load_N" value="0" step="1" oninput="updateEquilibrium()">
                                    <span class="unit">kN</span>
                                </div>

                                <div class="form-group">
                                    <label>Moment M <span class="label-description">(kolem osy z)</span></label>
                                    <input type="number" id="load_M" value="30" step="1" oninput="updateEquilibrium()">
                                    <span class="unit">kNm</span>
                                </div>
                            </div>

                            <!-- Rovnice rovnov√°hy -->
                            <div style="background: #f0f3ff; padding: 20px; border-radius: 10px; border: 3px solid #667eea;">
                                <h3 style="color: #667eea; font-size: 16px; margin-bottom: 15px; font-weight: bold;">üìê Rovnice rovnov√°hy</h3>

                                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                    <div style="font-family: 'Courier New', monospace; font-size: 14px; line-height: 2.2;">
                                        <div style="margin-bottom: 15px;">
                                            <strong style="color: #495057;">Silov√° rovnov√°ha:</strong><br>
                                            <span style="color: #2c3e50; font-weight: 600;">Fc + Fs1 + Fs2 = N</span><br>
                                            <span id="eq_force" style="color: #667eea; font-size: 13px;">Fc + As1¬∑œÉ1 + As2¬∑œÉ2 = N</span>
                                        </div>
                                        <div>
                                            <strong style="color: #495057;">Momentov√° rovnov√°ha:</strong><br>
                                            <span style="color: #2c3e50; font-weight: 600;">Mc + Ms1 + Ms2 = M</span><br>
                                            <span id="eq_moment" style="color: #667eea; font-size: 13px;">Fc¬∑(-yc) + As1¬∑œÉ1¬∑(-y1) + As2¬∑œÉ2¬∑(-y2) = M</span>
                                        </div>
                                    </div>
                                </div>

                                <div style="font-size: 12px; color: #6c757d; line-height: 1.6;">
                                    <strong>Kde:</strong><br>
                                    ‚Ä¢ Fc = norm√°lov√° s√≠la od betonu [N]<br>
                                    ‚Ä¢ As1, As2 = plocha horn√≠/doln√≠ v√Ωztu≈æe [m¬≤]<br>
                                    ‚Ä¢ œÉ1, œÉ2 = napƒõt√≠ v horn√≠/doln√≠ v√Ωztu≈æi [Pa]<br>
                                    ‚Ä¢ yc = vzd√°lenost tƒõ≈æi≈°tƒõ tlaƒçen√© oblasti k tƒõ≈æi≈°ti pr≈Ø≈ôezu [m]<br>
                                    ‚Ä¢ y1, y2 = vzd√°lenost v√Ωztu≈æe k tƒõ≈æi≈°ti pr≈Ø≈ôezu [m]<br>
                                    ‚Ä¢ N = zadan√° norm√°lov√° s√≠la [N]<br>
                                    ‚Ä¢ M = zadan√Ω moment [Nm]
                                </div>
                            </div>

                            <!-- Tlaƒç√≠tko pro v√Ωpoƒçet -->
                            <div class="button-group" style="margin-top: 20px;">
                                <button type="button" class="btn-calculate" onclick="calculateReinforcement()">
                                    üßÆ Navrhnout v√Ωztu≈æ
                                </button>
                            </div>

                            <!-- V√Ωsledky n√°vrhu -->
                            <div id="designResults" class="results" style="display: none; margin-top: 20px;">
                                <h2>üìä V√Ωsledky n√°vrhu</h2>
                                <div id="designResultsContent"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Prav√Ω panel - vizualizace -->
                    <div class="right-panel">
                        <div class="visualization">
                            <h2>üìà Vizualizace pr≈Ø≈ôezu s v√Ωztu≈æ√≠</h2>
                            <div class="canvas-container">
                                <canvas id="designCombinedCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 4: Interakƒçn√≠ diagram -->
            <div id="interakcni" class="main-tab-content">
                <div style="padding: 30px; flex: 1; overflow-y: auto;">
                    <div class="section" style="max-width: 100%; max-height: none;">
                        <h2>üìà Interakƒçn√≠ diagram N-M</h2>

                        <div class="info-box">
                            ‚ÑπÔ∏è Charakteristick√© body interakƒçn√≠ho diagramu - kombinace norm√°lov√© s√≠ly N a momentu M
                        </div>

                        <!-- Zad√°n√≠ vnit≈ôn√≠ch sil pro n√°vrh -->
                        <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #667eea;">
                            <h3 style="color: #667eea; font-size: 16px; margin-bottom: 15px;">‚ö° Zad√°n√≠ vnit≈ôn√≠ch sil pro n√°vrh v√Ωztu≈æe</h3>

                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; align-items: end;">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label>Norm√°lov√° s√≠la N <span class="label-description">(kladn√° = tah, z√°porn√° = tlak)</span></label>
                                    <input type="number" id="interaction_N" value="0" step="1">
                                    <span class="unit">kN</span>
                                </div>

                                <div class="form-group" style="margin-bottom: 0;">
                                    <label>Moment M <span class="label-description">(kolem osy z)</span></label>
                                    <input type="number" id="interaction_M" value="30" step="1">
                                    <span class="unit">kNm</span>
                                </div>

                                <div>
                                    <button type="button" class="btn-calculate" onclick="calculateInteractionReinforcement()" style="width: 100%; padding: 12px;">
                                        üîß Navrhnout v√Ωztu≈æ
                                    </button>
                                </div>
                            </div>

                            <!-- V√Ωsledky n√°vrhu -->
                            <div id="interactionDesignResults" style="display: none; margin-top: 15px; padding: 15px; background: #d4edda; border-radius: 8px; border: 2px solid #27ae60;">
                                <strong style="color: #27ae60;">‚úÖ VYPOƒåTEN√Å V√ùZTU≈Ω:</strong><br>
                                <div style="margin-top: 10px; font-size: 14px;">
                                    <span id="interactionAs1Result"></span><br>
                                    <span id="interactionAs2Result"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Nastaven√≠ zahu≈°tƒõn√≠ a tlaƒç√≠tko pro v√Ωpoƒçet diagramu -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: end; margin-bottom: 20px;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>Zahu≈°tƒõn√≠ bod≈Ø <span class="label-description">(poƒçet d√≠l≈Ø mezi charakteristick√Ωmi body)</span></label>
                                <input type="number" id="interaction_density" value="10" step="1" min="1" max="100">
                                <span class="unit">V√Ωchoz√≠: 10 d√≠l≈Ø mezi body</span>
                            </div>

                            <button type="button" class="btn-calculate" onclick="calculateInteractionDiagram()">
                                üßÆ Vygenerovat interakƒçn√≠ diagram
                            </button>
                        </div>

                        <!-- Tabulka s v√Ωsledky -->
                        <div id="interactionTableContainer" style="display: none;">
                            <div style="overflow-x: auto;">
                                <table id="interactionTable" class="interaction-table">
                                    <thead>
                                        <tr>
                                            <th rowspan="2">Bod</th>
                                            <th colspan="4">P≈ôetvo≈ôen√≠ [‚Ä∞]</th>
                                            <th colspan="3">S√≠ly [kN]</th>
                                            <th colspan="2">N√°vrhov√° v√Ωztu≈æ [cm¬≤]</th>
                                            <th rowspan="2">N [kN]</th>
                                            <th rowspan="2">M [kNm]</th>
                                        </tr>
                                        <tr>
                                            <th>Œµtop</th>
                                            <th>Œµbottom</th>
                                            <th>Œµs1</th>
                                            <th>Œµs2</th>
                                            <th>Fc</th>
                                            <th>Fs1</th>
                                            <th>Fs2</th>
                                            <th>As1</th>
                                            <th>As2</th>
                                        </tr>
                                    </thead>
                                    <tbody id="interactionTableBody">
                                        <!-- Data budou vlo≈æena JavaScriptem -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- V√Ωsledky chyb (pro debug) -->
                        <div id="interactionResults" class="results" style="display: none; margin-top: 20px;">
                            <h3>‚ö†Ô∏è Diagnostick√© informace</h3>
                            <div id="interactionResultsContent"></div>
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>

    <!-- JavaScript Files -->
    <script src="js/calculations.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>
